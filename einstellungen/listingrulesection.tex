\lstset{
  language=XML,
  emph={when,end,rule,if,then},
  emphstyle=\textbf,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\textbf,
  commentstyle=\ttfamily,
  stringstyle=\ttfamily,
  showstringspaces=false,
  showspaces=false,
  breaklines=true,
  backgroundcolor=\color[rgb]{0.92,0.92,0.92},
  frame=trlb,
  captionpos=b
}